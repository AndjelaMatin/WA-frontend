{"ast":null,"code":"import { createStore } from 'vuex';\nexport default createStore({\n  state: {\n    user: null,\n    token: localStorage.getItem('token') || '',\n    isAuthenticated: !!localStorage.getItem('token')\n  },\n  mutations: {\n    setUser(state, user) {\n      // Ako korisnik nema ID, pokušajte ga zadržati iz trenutnog stanja\n      if (!user.id) {\n        console.warn(\"Pokušaj postavljanja korisnika bez ID-a:\", user);\n        user.id = state.user ? state.user.id : null;\n      }\n      if (!user.id) {\n        console.error(\"Nije moguće postaviti korisnika bez ID-a:\", user);\n        return;\n      }\n      console.log(\"Postavljanje korisnika u Vuex:\", user);\n      state.user = user;\n    },\n    clearUser(state) {\n      console.log(\"Čišćenje korisničkih podataka iz Vuexa\");\n      state.user = null;\n    },\n    setToken(state, token) {\n      console.log('Setting token in Vuex:', token);\n      state.token = token;\n      state.isAuthenticated = true;\n      localStorage.setItem('token', token);\n    },\n    clearAuth(state) {\n      console.log('Clearing auth in Vuex');\n      state.user = null;\n      state.token = '';\n      state.isAuthenticated = false;\n      localStorage.removeItem('token');\n    }\n  },\n  actions: {\n    login({\n      commit\n    }, {\n      token,\n      user\n    }) {\n      console.log('Logging in via Vuex:', {\n        token,\n        user\n      });\n      commit('setToken', token);\n      commit('setUser', user);\n    },\n    logout({\n      commit\n    }) {\n      commit('clearAuth');\n    }\n  }\n});","map":{"version":3,"names":["createStore","state","user","token","localStorage","getItem","isAuthenticated","mutations","setUser","id","console","warn","error","log","clearUser","setToken","setItem","clearAuth","removeItem","actions","login","commit","logout"],"sources":["C:/Users/MATIN/Desktop/web aplikacije/WA-frontend/src/services/store.js"],"sourcesContent":["import { createStore } from 'vuex';\r\n\r\nexport default createStore({\r\n  state: {\r\n    user: null,\r\n    token: localStorage.getItem('token') || '',\r\n    isAuthenticated: !!localStorage.getItem('token'),\r\n  },\r\n  mutations: {\r\n    setUser(state, user) {\r\n      // Ako korisnik nema ID, pokušajte ga zadržati iz trenutnog stanja\r\n      if (!user.id) {\r\n        console.warn(\"Pokušaj postavljanja korisnika bez ID-a:\", user);\r\n        user.id = state.user ? state.user.id : null;\r\n      }\r\n  \r\n      if (!user.id) {\r\n        console.error(\"Nije moguće postaviti korisnika bez ID-a:\", user);\r\n        return;\r\n      }\r\n  \r\n      console.log(\"Postavljanje korisnika u Vuex:\", user);\r\n      state.user = user;\r\n    },\r\n    clearUser(state) {\r\n      console.log(\"Čišćenje korisničkih podataka iz Vuexa\");\r\n      state.user = null;\r\n    },\r\n    setToken(state, token) {\r\n      console.log('Setting token in Vuex:', token); \r\n      state.token = token;\r\n      state.isAuthenticated = true;\r\n      localStorage.setItem('token', token);\r\n    },\r\n    clearAuth(state) {\r\n      console.log('Clearing auth in Vuex'); \r\n      state.user = null;\r\n      state.token = '';\r\n      state.isAuthenticated = false;\r\n      localStorage.removeItem('token');\r\n    },\r\n  },\r\n  actions: {\r\n    login({ commit }, { token, user }) {\r\n      console.log('Logging in via Vuex:', { token, user }); \r\n      commit('setToken', token);\r\n      commit('setUser', user);\r\n    },\r\n    logout({ commit }) {\r\n      commit('clearAuth');\r\n    },\r\n  },\r\n});"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAElC,eAAeA,WAAW,CAAC;EACzBC,KAAK,EAAE;IACLC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;IAC1CC,eAAe,EAAE,CAAC,CAACF,YAAY,CAACC,OAAO,CAAC,OAAO;EACjD,CAAC;EACDE,SAAS,EAAE;IACTC,OAAOA,CAACP,KAAK,EAAEC,IAAI,EAAE;MACnB;MACA,IAAI,CAACA,IAAI,CAACO,EAAE,EAAE;QACZC,OAAO,CAACC,IAAI,CAAC,0CAA0C,EAAET,IAAI,CAAC;QAC9DA,IAAI,CAACO,EAAE,GAAGR,KAAK,CAACC,IAAI,GAAGD,KAAK,CAACC,IAAI,CAACO,EAAE,GAAG,IAAI;MAC7C;MAEA,IAAI,CAACP,IAAI,CAACO,EAAE,EAAE;QACZC,OAAO,CAACE,KAAK,CAAC,2CAA2C,EAAEV,IAAI,CAAC;QAChE;MACF;MAEAQ,OAAO,CAACG,GAAG,CAAC,gCAAgC,EAAEX,IAAI,CAAC;MACnDD,KAAK,CAACC,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDY,SAASA,CAACb,KAAK,EAAE;MACfS,OAAO,CAACG,GAAG,CAAC,wCAAwC,CAAC;MACrDZ,KAAK,CAACC,IAAI,GAAG,IAAI;IACnB,CAAC;IACDa,QAAQA,CAACd,KAAK,EAAEE,KAAK,EAAE;MACrBO,OAAO,CAACG,GAAG,CAAC,wBAAwB,EAAEV,KAAK,CAAC;MAC5CF,KAAK,CAACE,KAAK,GAAGA,KAAK;MACnBF,KAAK,CAACK,eAAe,GAAG,IAAI;MAC5BF,YAAY,CAACY,OAAO,CAAC,OAAO,EAAEb,KAAK,CAAC;IACtC,CAAC;IACDc,SAASA,CAAChB,KAAK,EAAE;MACfS,OAAO,CAACG,GAAG,CAAC,uBAAuB,CAAC;MACpCZ,KAAK,CAACC,IAAI,GAAG,IAAI;MACjBD,KAAK,CAACE,KAAK,GAAG,EAAE;MAChBF,KAAK,CAACK,eAAe,GAAG,KAAK;MAC7BF,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;IAClC;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAE;MAAElB,KAAK;MAAED;IAAK,CAAC,EAAE;MACjCQ,OAAO,CAACG,GAAG,CAAC,sBAAsB,EAAE;QAAEV,KAAK;QAAED;MAAK,CAAC,CAAC;MACpDmB,MAAM,CAAC,UAAU,EAAElB,KAAK,CAAC;MACzBkB,MAAM,CAAC,SAAS,EAAEnB,IAAI,CAAC;IACzB,CAAC;IACDoB,MAAMA,CAAC;MAAED;IAAO,CAAC,EAAE;MACjBA,MAAM,CAAC,WAAW,CAAC;IACrB;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}